/*! For license information please see 5649.ce61978b.js.LICENSE.txt */
(self.webpackChunkant_open_source=self.webpackChunkant_open_source||[]).push([[5649],{57417:(t,e,n)=>{"use strict";n.d(e,{A:()=>H});var r=n(31635),i=n(96540),o=function(t){return function(e,n){var r=(0,i.useRef)(!1);t((function(){return function(){r.current=!1}}),[]),t((function(){if(r.current)return e();r.current=!0}),n)}};const s=o(i.useEffect);var a=function(t,e){var n=e.manual,o=e.ready,a=void 0===o||o,u=e.defaultParams,c=void 0===u?[]:u,f=e.refreshDeps,l=void 0===f?[]:f,d=e.refreshDepsAction,h=(0,i.useRef)(!1);return h.current=!1,s((function(){!n&&a&&(h.current=!0,t.run.apply(t,(0,r.fX)([],(0,r.zs)(c),!1)))}),[a]),s((function(){h.current||n||(h.current=!0,d?d():t.refresh())}),(0,r.fX)([],(0,r.zs)(l),!1)),{onBefore:function(){if(!a)return{stopNow:!0}}}};a.onInit=function(t){var e=t.ready,n=void 0===e||e;return{loading:!t.manual&&n}};const u=a;function c(t,e){var n=(0,i.useRef)({deps:e,obj:void 0,initialized:!1}).current;return!1!==n.initialized&&function(t,e){if(t===e)return!0;for(var n=0;n<t.length;n++)if(!Object.is(t[n],e[n]))return!1;return!0}(n.deps,e)||(n.deps=e,n.obj=t(),n.initialized=!0),n.obj}const f=function(t){var e=(0,i.useRef)(t);return e.current=t,e};var l=function(t){return"function"==typeof t};const d=function(t){var e=f(t);(0,i.useEffect)((function(){return function(){e.current()}}),[])};var h=new Map,p=new Map,v={},g=function(t,e){return v[t]||(v[t]=[]),v[t].push(e),function(){var n=v[t].indexOf(e);v[t].splice(n,1)}};const m=function(t,e){var n=e.cacheKey,o=e.cacheTime,s=void 0===o?3e5:o,a=e.staleTime,u=void 0===a?0:a,f=e.setCache,l=e.getCache,m=(0,i.useRef)(),y=(0,i.useRef)(),_=function(t,e){f?f(e):function(t,e,n){var i=h.get(t);(null==i?void 0:i.timer)&&clearTimeout(i.timer);var o=void 0;e>-1&&(o=setTimeout((function(){h.delete(t)}),e)),h.set(t,(0,r.Cl)((0,r.Cl)({},n),{timer:o}))}(t,s,e),function(t,e){v[t]&&v[t].forEach((function(t){return t(e)}))}(t,e.data)},b=function(t,e){return void 0===e&&(e=[]),l?l(e):function(t){return h.get(t)}(t)};return c((function(){if(n){var e=b(n);e&&Object.hasOwnProperty.call(e,"data")&&(t.state.data=e.data,t.state.params=e.params,(-1===u||(new Date).getTime()-e.time<=u)&&(t.state.loading=!1)),m.current=g(n,(function(e){t.setState({data:e})}))}}),[]),d((function(){var t;null===(t=m.current)||void 0===t||t.call(m)})),n?{onBefore:function(t){var e=b(n,t);return e&&Object.hasOwnProperty.call(e,"data")?-1===u||(new Date).getTime()-e.time<=u?{loading:!1,data:null==e?void 0:e.data,error:void 0,returnNow:!0}:{data:null==e?void 0:e.data,error:void 0}:{}},onRequest:function(t,e){var i=function(t){return p.get(t)}(n);return i&&i!==y.current||(i=t.apply(void 0,(0,r.fX)([],(0,r.zs)(e),!1)),y.current=i,function(t,e){p.set(t,e),e.then((function(e){return p.delete(t),e})).catch((function(){p.delete(t)}))}(n,i)),{servicePromise:i}},onSuccess:function(e,r){var i;n&&(null===(i=m.current)||void 0===i||i.call(m),_(n,{data:e,params:r,time:(new Date).getTime()}),m.current=g(n,(function(e){t.setState({data:e})})))},onMutate:function(e){var r;n&&(null===(r=m.current)||void 0===r||r.call(m),_(n,{data:e,params:t.state.params,time:(new Date).getTime()}),m.current=g(n,(function(e){t.setState({data:e})})))}}:{}};var y=n(38221),_=n.n(y);const b=function(t,e){var n=e.debounceWait,o=e.debounceLeading,s=e.debounceTrailing,a=e.debounceMaxWait,u=(0,i.useRef)(),c=(0,i.useMemo)((function(){var t={};return void 0!==o&&(t.leading=o),void 0!==s&&(t.trailing=s),void 0!==a&&(t.maxWait=a),t}),[o,s,a]);return(0,i.useEffect)((function(){if(n){var e=t.runAsync.bind(t);return u.current=_()((function(t){t()}),n,c),t.runAsync=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return new Promise((function(n,i){var o;null===(o=u.current)||void 0===o||o.call(u,(function(){e.apply(void 0,(0,r.fX)([],(0,r.zs)(t),!1)).then(n).catch(i)}))}))},function(){var n;null===(n=u.current)||void 0===n||n.cancel(),t.runAsync=e}}}),[n,c]),n?{onCancel:function(){var t;null===(t=u.current)||void 0===t||t.cancel()}}:{}};const w=function(t,e){var n=e.loadingDelay,r=e.ready,o=(0,i.useRef)();if(!n)return{};var s=function(){o.current&&clearTimeout(o.current)};return{onBefore:function(){return s(),!1!==r&&(o.current=setTimeout((function(){t.setState({loading:!0})}),n)),{loading:!1}},onFinally:function(){s()},onCancel:function(){s()}}};const k=!("undefined"==typeof window||!window.document||!window.document.createElement);function E(){return!k||"hidden"!==document.visibilityState}var R=[];if(k){window.addEventListener("visibilitychange",(function(){if(E())for(var t=0;t<R.length;t++){(0,R[t])()}}),!1)}const C=function(t){return R.push(t),function(){var e=R.indexOf(t);R.splice(e,1)}};const S=function(t,e){var n=e.pollingInterval,r=e.pollingWhenHidden,o=void 0===r||r,a=e.pollingErrorRetryCount,u=void 0===a?-1:a,c=(0,i.useRef)(),f=(0,i.useRef)(),l=(0,i.useRef)(0),d=function(){var t;c.current&&clearTimeout(c.current),null===(t=f.current)||void 0===t||t.call(f)};return s((function(){n||d()}),[n]),n?{onBefore:function(){d()},onError:function(){l.current+=1},onSuccess:function(){l.current=0},onFinally:function(){-1===u||-1!==u&&l.current<=u?c.current=setTimeout((function(){o||E()?t.refresh():f.current=C((function(){t.refresh()}))}),n):l.current=0},onCancel:function(){d()}}:{}};var O=[];if(k){var x=function(){if(E()&&(!k||void 0===navigator.onLine||navigator.onLine))for(var t=0;t<O.length;t++){(0,O[t])()}};window.addEventListener("visibilitychange",x,!1),window.addEventListener("focus",x,!1)}const T=function(t){return O.push(t),function(){var e=O.indexOf(t);e>-1&&O.splice(e,1)}};const A=function(t,e){var n=e.refreshOnWindowFocus,o=e.focusTimespan,s=void 0===o?5e3:o,a=(0,i.useRef)(),u=function(){var t;null===(t=a.current)||void 0===t||t.call(a)};return(0,i.useEffect)((function(){if(n){var e=(i=t.refresh.bind(t),o=s,c=!1,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];c||(c=!0,i.apply(void 0,(0,r.fX)([],(0,r.zs)(t),!1)),setTimeout((function(){c=!1}),o))});a.current=T((function(){e()}))}var i,o,c;return function(){u()}}),[n,s]),d((function(){u()})),{}};const I=function(t,e){var n=e.retryInterval,r=e.retryCount,o=(0,i.useRef)(),s=(0,i.useRef)(0),a=(0,i.useRef)(!1);return r?{onBefore:function(){a.current||(s.current=0),a.current=!1,o.current&&clearTimeout(o.current)},onSuccess:function(){s.current=0},onError:function(){if(s.current+=1,-1===r||s.current<=r){var e=null!=n?n:Math.min(1e3*Math.pow(2,s.current),3e4);o.current=setTimeout((function(){a.current=!0,t.refresh()}),e)}else s.current=0},onCancel:function(){s.current=0,o.current&&clearTimeout(o.current)}}:{}};var j=n(7350),D=n.n(j);const z=function(t,e){var n=e.throttleWait,o=e.throttleLeading,s=e.throttleTrailing,a=(0,i.useRef)(),u={};return void 0!==o&&(u.leading=o),void 0!==s&&(u.trailing=s),(0,i.useEffect)((function(){if(n){var e=t.runAsync.bind(t);return a.current=D()((function(t){t()}),n,u),t.runAsync=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return new Promise((function(n,i){var o;null===(o=a.current)||void 0===o||o.call(a,(function(){e.apply(void 0,(0,r.fX)([],(0,r.zs)(t),!1)).then(n).catch(i)}))}))},function(){var n;t.runAsync=e,null===(n=a.current)||void 0===n||n.cancel()}}}),[n,o,s]),n?{onCancel:function(){var t;null===(t=a.current)||void 0===t||t.cancel()}}:{}};const L=function(t){var e=(0,i.useRef)(t);e.current=(0,i.useMemo)((function(){return t}),[t]);var n=(0,i.useRef)();return n.current||(n.current=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.current.apply(this,t)}),n.current};const P=function(t){(0,i.useEffect)((function(){null==t||t()}),[])};const F=function(){var t=(0,r.zs)((0,i.useState)({}),2)[1];return(0,i.useCallback)((function(){return t({})}),[])};var M=function(){function t(t,e,n,i){void 0===i&&(i={}),this.serviceRef=t,this.options=e,this.subscribe=n,this.initState=i,this.count=0,this.state={loading:!1,params:void 0,data:void 0,error:void 0},this.state=(0,r.Cl)((0,r.Cl)((0,r.Cl)({},this.state),{loading:!e.manual}),i)}return t.prototype.setState=function(t){void 0===t&&(t={}),this.state=(0,r.Cl)((0,r.Cl)({},this.state),t),this.subscribe()},t.prototype.runPluginHandler=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var i=this.pluginImpls.map((function(n){var i;return null===(i=n[t])||void 0===i?void 0:i.call.apply(i,(0,r.fX)([n],(0,r.zs)(e),!1))})).filter(Boolean);return Object.assign.apply(Object,(0,r.fX)([{}],(0,r.zs)(i),!1))},t.prototype.runAsync=function(){for(var t,e,n,i,o,s,a,u,c,f,l=[],d=0;d<arguments.length;d++)l[d]=arguments[d];return(0,r.sH)(this,void 0,void 0,(function(){var d,h,p,v,g,m,y,_,b,w,k;return(0,r.YH)(this,(function(E){switch(E.label){case 0:if(this.count+=1,d=this.count,h=this.runPluginHandler("onBefore",l),p=h.stopNow,v=void 0!==p&&p,g=h.returnNow,m=void 0!==g&&g,y=(0,r.Tt)(h,["stopNow","returnNow"]),v)return[2,new Promise((function(){}))];if(this.setState((0,r.Cl)({loading:!0,params:l},y)),m)return[2,Promise.resolve(y.data)];null===(e=(t=this.options).onBefore)||void 0===e||e.call(t,l),E.label=1;case 1:return E.trys.push([1,3,,4]),(_=this.runPluginHandler("onRequest",this.serviceRef.current,l).servicePromise)||(_=(k=this.serviceRef).current.apply(k,(0,r.fX)([],(0,r.zs)(l),!1))),[4,_];case 2:return b=E.sent(),d!==this.count?[2,new Promise((function(){}))]:(this.setState({data:b,error:void 0,loading:!1}),null===(i=(n=this.options).onSuccess)||void 0===i||i.call(n,b,l),this.runPluginHandler("onSuccess",b,l),null===(s=(o=this.options).onFinally)||void 0===s||s.call(o,l,b,void 0),d===this.count&&this.runPluginHandler("onFinally",l,b,void 0),[2,b]);case 3:if(w=E.sent(),d!==this.count)return[2,new Promise((function(){}))];throw this.setState({error:w,loading:!1}),null===(u=(a=this.options).onError)||void 0===u||u.call(a,w,l),this.runPluginHandler("onError",w,l),null===(f=(c=this.options).onFinally)||void 0===f||f.call(c,l,void 0,w),d===this.count&&this.runPluginHandler("onFinally",l,void 0,w),w;case 4:return[2]}}))}))},t.prototype.run=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this.runAsync.apply(this,(0,r.fX)([],(0,r.zs)(e),!1)).catch((function(e){t.options.onError||console.error(e)}))},t.prototype.cancel=function(){this.count+=1,this.setState({loading:!1}),this.runPluginHandler("onCancel")},t.prototype.refresh=function(){this.run.apply(this,(0,r.fX)([],(0,r.zs)(this.state.params||[]),!1))},t.prototype.refreshAsync=function(){return this.runAsync.apply(this,(0,r.fX)([],(0,r.zs)(this.state.params||[]),!1))},t.prototype.mutate=function(t){var e=l(t)?t(this.state.data):t;this.runPluginHandler("onMutate",e),this.setState({data:e})},t}();const N=M;const B=function(t,e,n){void 0===e&&(e={}),void 0===n&&(n=[]);var i=e.manual,o=void 0!==i&&i,s=e.ready,a=void 0===s||s,u=(0,r.Tt)(e,["manual","ready"]),l=(0,r.Cl)({manual:o,ready:a},u),h=f(t),p=F(),v=c((function(){var t=n.map((function(t){var e;return null===(e=null==t?void 0:t.onInit)||void 0===e?void 0:e.call(t,l)})).filter(Boolean);return new N(h,l,p,Object.assign.apply(Object,(0,r.fX)([{}],(0,r.zs)(t),!1)))}),[]);return v.options=l,v.pluginImpls=n.map((function(t){return t(v,l)})),P((function(){if(!o&&a){var t=v.state.params||e.defaultParams||[];v.run.apply(v,(0,r.fX)([],(0,r.zs)(t),!1))}})),d((function(){v.cancel()})),{loading:v.state.loading,data:v.state.data,error:v.state.error,params:v.state.params||[],cancel:L(v.cancel.bind(v)),refresh:L(v.refresh.bind(v)),refreshAsync:L(v.refreshAsync.bind(v)),run:L(v.run.bind(v)),runAsync:L(v.runAsync.bind(v)),mutate:L(v.mutate.bind(v))}};const H=function(t,e,n){return B(t,e,(0,r.fX)((0,r.fX)([],(0,r.zs)(n||[]),!1),[b,w,S,A,z,u,m,I],!1))}},51873:(t,e,n)=>{var r=n(9325).Symbol;t.exports=r},72552:(t,e,n)=>{var r=n(51873),i=n(659),o=n(59350),s=r?r.toStringTag:void 0;t.exports=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":s&&s in Object(t)?i(t):o(t)}},54128:(t,e,n)=>{var r=n(31800),i=/^\s+/;t.exports=function(t){return t?t.slice(0,r(t)+1).replace(i,""):t}},34840:(t,e,n)=>{var r="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g;t.exports=r},659:(t,e,n)=>{var r=n(51873),i=Object.prototype,o=i.hasOwnProperty,s=i.toString,a=r?r.toStringTag:void 0;t.exports=function(t){var e=o.call(t,a),n=t[a];try{t[a]=void 0;var r=!0}catch(u){}var i=s.call(t);return r&&(e?t[a]=n:delete t[a]),i}},59350:t=>{var e=Object.prototype.toString;t.exports=function(t){return e.call(t)}},9325:(t,e,n)=>{var r=n(34840),i="object"==typeof self&&self&&self.Object===Object&&self,o=r||i||Function("return this")();t.exports=o},31800:t=>{var e=/\s/;t.exports=function(t){for(var n=t.length;n--&&e.test(t.charAt(n)););return n}},38221:(t,e,n)=>{var r=n(23805),i=n(10124),o=n(99374),s=Math.max,a=Math.min;t.exports=function(t,e,n){var u,c,f,l,d,h,p=0,v=!1,g=!1,m=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function y(e){var n=u,r=c;return u=c=void 0,p=e,l=t.apply(r,n)}function _(t){var n=t-h;return void 0===h||n>=e||n<0||g&&t-p>=f}function b(){var t=i();if(_(t))return w(t);d=setTimeout(b,function(t){var n=e-(t-h);return g?a(n,f-(t-p)):n}(t))}function w(t){return d=void 0,m&&u?y(t):(u=c=void 0,l)}function k(){var t=i(),n=_(t);if(u=arguments,c=this,h=t,n){if(void 0===d)return function(t){return p=t,d=setTimeout(b,e),v?y(t):l}(h);if(g)return clearTimeout(d),d=setTimeout(b,e),y(h)}return void 0===d&&(d=setTimeout(b,e)),l}return e=o(e)||0,r(n)&&(v=!!n.leading,f=(g="maxWait"in n)?s(o(n.maxWait)||0,e):f,m="trailing"in n?!!n.trailing:m),k.cancel=function(){void 0!==d&&clearTimeout(d),p=0,u=h=c=d=void 0},k.flush=function(){return void 0===d?l:w(i())},k}},23805:t=>{t.exports=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}},40346:t=>{t.exports=function(t){return null!=t&&"object"==typeof t}},44394:(t,e,n)=>{var r=n(72552),i=n(40346);t.exports=function(t){return"symbol"==typeof t||i(t)&&"[object Symbol]"==r(t)}},10124:(t,e,n)=>{var r=n(9325);t.exports=function(){return r.Date.now()}},7350:(t,e,n)=>{var r=n(38221),i=n(23805);t.exports=function(t,e,n){var o=!0,s=!0;if("function"!=typeof t)throw new TypeError("Expected a function");return i(n)&&(o="leading"in n?!!n.leading:o,s="trailing"in n?!!n.trailing:s),r(t,e,{leading:o,maxWait:e,trailing:s})}},99374:(t,e,n)=>{var r=n(54128),i=n(23805),o=n(44394),s=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,u=/^0o[0-7]+$/i,c=parseInt;t.exports=function(t){if("number"==typeof t)return t;if(o(t))return NaN;if(i(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=i(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=r(t);var n=a.test(t);return n||u.test(t)?c(t.slice(2),n?2:8):s.test(t)?NaN:+t}},44809:function(t,e){var n,r,i;r=[],n=function t(){"use strict";var e="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==e?e:{},n=!e.document&&!!e.postMessage,r=e.IS_PAPA_WORKER||!1,i={},o=0,s={parse:function(n,r){var a=(r=r||{}).dynamicTyping||!1;if(w(a)&&(r.dynamicTypingFunction=a,a={}),r.dynamicTyping=a,r.transform=!!w(r.transform)&&r.transform,r.worker&&s.WORKERS_SUPPORTED){var u=function(){if(!s.WORKERS_SUPPORTED)return!1;var n,r,a=(n=e.URL||e.webkitURL||null,r=t.toString(),s.BLOB_URL||(s.BLOB_URL=n.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",r,")();"],{type:"text/javascript"})))),u=new e.Worker(a);return u.onmessage=g,u.id=o++,i[u.id]=u}();return u.userStep=r.step,u.userChunk=r.chunk,u.userComplete=r.complete,u.userError=r.error,r.step=w(r.step),r.chunk=w(r.chunk),r.complete=w(r.complete),r.error=w(r.error),delete r.worker,void u.postMessage({input:n,config:r,workerId:u.id})}var h=null;return s.NODE_STREAM_INPUT,"string"==typeof n?(n=function(t){return 65279===t.charCodeAt(0)?t.slice(1):t}(n),h=r.download?new c(r):new l(r)):!0===n.readable&&w(n.read)&&w(n.on)?h=new d(r):(e.File&&n instanceof File||n instanceof Object)&&(h=new f(r)),h.stream(n)},unparse:function(t,e){var n=!1,r=!0,i=",",o="\r\n",a='"',u=a+a,c=!1,f=null,l=!1;!function(){if("object"==typeof e){if("string"!=typeof e.delimiter||s.BAD_DELIMITERS.filter((function(t){return-1!==e.delimiter.indexOf(t)})).length||(i=e.delimiter),("boolean"==typeof e.quotes||"function"==typeof e.quotes||Array.isArray(e.quotes))&&(n=e.quotes),"boolean"!=typeof e.skipEmptyLines&&"string"!=typeof e.skipEmptyLines||(c=e.skipEmptyLines),"string"==typeof e.newline&&(o=e.newline),"string"==typeof e.quoteChar&&(a=e.quoteChar),"boolean"==typeof e.header&&(r=e.header),Array.isArray(e.columns)){if(0===e.columns.length)throw new Error("Option columns is empty");f=e.columns}void 0!==e.escapeChar&&(u=e.escapeChar+a),("boolean"==typeof e.escapeFormulae||e.escapeFormulae instanceof RegExp)&&(l=e.escapeFormulae instanceof RegExp?e.escapeFormulae:/^[=+\-@\t\r].*$/)}}();var d=new RegExp(p(a),"g");if("string"==typeof t&&(t=JSON.parse(t)),Array.isArray(t)){if(!t.length||Array.isArray(t[0]))return h(null,t,c);if("object"==typeof t[0])return h(f||Object.keys(t[0]),t,c)}else if("object"==typeof t)return"string"==typeof t.data&&(t.data=JSON.parse(t.data)),Array.isArray(t.data)&&(t.fields||(t.fields=t.meta&&t.meta.fields||f),t.fields||(t.fields=Array.isArray(t.data[0])?t.fields:"object"==typeof t.data[0]?Object.keys(t.data[0]):[]),Array.isArray(t.data[0])||"object"==typeof t.data[0]||(t.data=[t.data])),h(t.fields||[],t.data||[],c);throw new Error("Unable to serialize unrecognized input");function h(t,e,n){var s="";"string"==typeof t&&(t=JSON.parse(t)),"string"==typeof e&&(e=JSON.parse(e));var a=Array.isArray(t)&&0<t.length,u=!Array.isArray(e[0]);if(a&&r){for(var c=0;c<t.length;c++)0<c&&(s+=i),s+=v(t[c],c);0<e.length&&(s+=o)}for(var f=0;f<e.length;f++){var l=a?t.length:e[f].length,d=!1,h=a?0===Object.keys(e[f]).length:0===e[f].length;if(n&&!a&&(d="greedy"===n?""===e[f].join("").trim():1===e[f].length&&0===e[f][0].length),"greedy"===n&&a){for(var p=[],g=0;g<l;g++){var m=u?t[g]:g;p.push(e[f][m])}d=""===p.join("").trim()}if(!d){for(var y=0;y<l;y++){0<y&&!h&&(s+=i);var _=a&&u?t[y]:y;s+=v(e[f][_],y)}f<e.length-1&&(!n||0<l&&!h)&&(s+=o)}}return s}function v(t,e){if(null==t)return"";if(t.constructor===Date)return JSON.stringify(t).slice(1,25);var r=!1;l&&"string"==typeof t&&l.test(t)&&(t="'"+t,r=!0);var o=t.toString().replace(d,u);return(r=r||!0===n||"function"==typeof n&&n(t,e)||Array.isArray(n)&&n[e]||function(t,e){for(var n=0;n<e.length;n++)if(-1<t.indexOf(e[n]))return!0;return!1}(o,s.BAD_DELIMITERS)||-1<o.indexOf(i)||" "===o.charAt(0)||" "===o.charAt(o.length-1))?a+o+a:o}}};if(s.RECORD_SEP=String.fromCharCode(30),s.UNIT_SEP=String.fromCharCode(31),s.BYTE_ORDER_MARK="\ufeff",s.BAD_DELIMITERS=["\r","\n",'"',s.BYTE_ORDER_MARK],s.WORKERS_SUPPORTED=!n&&!!e.Worker,s.NODE_STREAM_INPUT=1,s.LocalChunkSize=10485760,s.RemoteChunkSize=5242880,s.DefaultDelimiter=",",s.Parser=v,s.ParserHandle=h,s.NetworkStreamer=c,s.FileStreamer=f,s.StringStreamer=l,s.ReadableStreamStreamer=d,e.jQuery){var a=e.jQuery;a.fn.parse=function(t){var n=t.config||{},r=[];return this.each((function(t){if("INPUT"!==a(this).prop("tagName").toUpperCase()||"file"!==a(this).attr("type").toLowerCase()||!e.FileReader||!this.files||0===this.files.length)return!0;for(var i=0;i<this.files.length;i++)r.push({file:this.files[i],inputElem:this,instanceConfig:a.extend({},n)})})),i(),this;function i(){if(0!==r.length){var e,n,i,u,c=r[0];if(w(t.before)){var f=t.before(c.file,c.inputElem);if("object"==typeof f){if("abort"===f.action)return e="AbortError",n=c.file,i=c.inputElem,u=f.reason,void(w(t.error)&&t.error({name:e},n,i,u));if("skip"===f.action)return void o();"object"==typeof f.config&&(c.instanceConfig=a.extend(c.instanceConfig,f.config))}else if("skip"===f)return void o()}var l=c.instanceConfig.complete;c.instanceConfig.complete=function(t){w(l)&&l(t,c.file,c.inputElem),o()},s.parse(c.file,c.instanceConfig)}else w(t.complete)&&t.complete()}function o(){r.splice(0,1),i()}}}function u(t){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},function(t){var e=_(t);e.chunkSize=parseInt(e.chunkSize),t.step||t.chunk||(e.chunkSize=null),this._handle=new h(e),(this._handle.streamer=this)._config=e}.call(this,t),this.parseChunk=function(t,n){if(this.isFirstChunk&&w(this._config.beforeFirstChunk)){var i=this._config.beforeFirstChunk(t);void 0!==i&&(t=i)}this.isFirstChunk=!1,this._halted=!1;var o=this._partialLine+t;this._partialLine="";var a=this._handle.parse(o,this._baseIndex,!this._finished);if(!this._handle.paused()&&!this._handle.aborted()){var u=a.meta.cursor;this._finished||(this._partialLine=o.substring(u-this._baseIndex),this._baseIndex=u),a&&a.data&&(this._rowCount+=a.data.length);var c=this._finished||this._config.preview&&this._rowCount>=this._config.preview;if(r)e.postMessage({results:a,workerId:s.WORKER_ID,finished:c});else if(w(this._config.chunk)&&!n){if(this._config.chunk(a,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);a=void 0,this._completeResults=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(a.data),this._completeResults.errors=this._completeResults.errors.concat(a.errors),this._completeResults.meta=a.meta),this._completed||!c||!w(this._config.complete)||a&&a.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),c||a&&a.meta.paused||this._nextChunk(),a}this._halted=!0},this._sendError=function(t){w(this._config.error)?this._config.error(t):r&&this._config.error&&e.postMessage({workerId:s.WORKER_ID,error:t,finished:!1})}}function c(t){var e;(t=t||{}).chunkSize||(t.chunkSize=s.RemoteChunkSize),u.call(this,t),this._nextChunk=n?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(t){this._input=t,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(e=new XMLHttpRequest,this._config.withCredentials&&(e.withCredentials=this._config.withCredentials),n||(e.onload=b(this._chunkLoaded,this),e.onerror=b(this._chunkError,this)),e.open(this._config.downloadRequestBody?"POST":"GET",this._input,!n),this._config.downloadRequestHeaders){var t=this._config.downloadRequestHeaders;for(var r in t)e.setRequestHeader(r,t[r])}if(this._config.chunkSize){var i=this._start+this._config.chunkSize-1;e.setRequestHeader("Range","bytes="+this._start+"-"+i)}try{e.send(this._config.downloadRequestBody)}catch(t){this._chunkError(t.message)}n&&0===e.status&&this._chunkError()}},this._chunkLoaded=function(){4===e.readyState&&(e.status<200||400<=e.status?this._chunkError():(this._start+=this._config.chunkSize?this._config.chunkSize:e.responseText.length,this._finished=!this._config.chunkSize||this._start>=function(t){var e=t.getResponseHeader("Content-Range");return null===e?-1:parseInt(e.substring(e.lastIndexOf("/")+1))}(e),this.parseChunk(e.responseText)))},this._chunkError=function(t){var n=e.statusText||t;this._sendError(new Error(n))}}function f(t){var e,n;(t=t||{}).chunkSize||(t.chunkSize=s.LocalChunkSize),u.call(this,t);var r="undefined"!=typeof FileReader;this.stream=function(t){this._input=t,n=t.slice||t.webkitSlice||t.mozSlice,r?((e=new FileReader).onload=b(this._chunkLoaded,this),e.onerror=b(this._chunkError,this)):e=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var t=this._input;if(this._config.chunkSize){var i=Math.min(this._start+this._config.chunkSize,this._input.size);t=n.call(t,this._start,i)}var o=e.readAsText(t,this._config.encoding);r||this._chunkLoaded({target:{result:o}})},this._chunkLoaded=function(t){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(t.target.result)},this._chunkError=function(){this._sendError(e.error)}}function l(t){var e;u.call(this,t=t||{}),this.stream=function(t){return e=t,this._nextChunk()},this._nextChunk=function(){if(!this._finished){var t,n=this._config.chunkSize;return n?(t=e.substring(0,n),e=e.substring(n)):(t=e,e=""),this._finished=!e,this.parseChunk(t)}}}function d(t){u.call(this,t=t||{});var e=[],n=!0,r=!1;this.pause=function(){u.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){u.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(t){this._input=t,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){r&&1===e.length&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),e.length?this.parseChunk(e.shift()):n=!0},this._streamData=b((function(t){try{e.push("string"==typeof t?t:t.toString(this._config.encoding)),n&&(n=!1,this._checkIsFinished(),this.parseChunk(e.shift()))}catch(t){this._streamError(t)}}),this),this._streamError=b((function(t){this._streamCleanUp(),this._sendError(t)}),this),this._streamEnd=b((function(){this._streamCleanUp(),r=!0,this._streamData("")}),this),this._streamCleanUp=b((function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)}),this)}function h(t){var e,n,r,i=Math.pow(2,53),o=-i,a=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,u=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,c=this,f=0,l=0,d=!1,h=!1,g=[],m={data:[],errors:[],meta:{}};if(w(t.step)){var y=t.step;t.step=function(e){if(m=e,E())k();else{if(k(),0===m.data.length)return;f+=e.data.length,t.preview&&f>t.preview?n.abort():(m.data=m.data[0],y(m,c))}}}function b(e){return"greedy"===t.skipEmptyLines?""===e.join("").trim():1===e.length&&0===e[0].length}function k(){return m&&r&&(C("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+s.DefaultDelimiter+"'"),r=!1),t.skipEmptyLines&&(m.data=m.data.filter((function(t){return!b(t)}))),E()&&function(){if(m)if(Array.isArray(m.data[0])){for(var e=0;E()&&e<m.data.length;e++)m.data[e].forEach(n);m.data.splice(0,1)}else m.data.forEach(n);function n(e,n){w(t.transformHeader)&&(e=t.transformHeader(e,n)),g.push(e)}}(),function(){if(!m||!t.header&&!t.dynamicTyping&&!t.transform)return m;function e(e,n){var r,i=t.header?{}:[];for(r=0;r<e.length;r++){var o=r,s=e[r];t.header&&(o=r>=g.length?"__parsed_extra":g[r]),t.transform&&(s=t.transform(s,o)),s=R(o,s),"__parsed_extra"===o?(i[o]=i[o]||[],i[o].push(s)):i[o]=s}return t.header&&(r>g.length?C("FieldMismatch","TooManyFields","Too many fields: expected "+g.length+" fields but parsed "+r,l+n):r<g.length&&C("FieldMismatch","TooFewFields","Too few fields: expected "+g.length+" fields but parsed "+r,l+n)),i}var n=1;return!m.data.length||Array.isArray(m.data[0])?(m.data=m.data.map(e),n=m.data.length):m.data=e(m.data,0),t.header&&m.meta&&(m.meta.fields=g),l+=n,m}()}function E(){return t.header&&0===g.length}function R(e,n){return r=e,t.dynamicTypingFunction&&void 0===t.dynamicTyping[r]&&(t.dynamicTyping[r]=t.dynamicTypingFunction(r)),!0===(t.dynamicTyping[r]||t.dynamicTyping)?"true"===n||"TRUE"===n||"false"!==n&&"FALSE"!==n&&(function(t){if(a.test(t)){var e=parseFloat(t);if(o<e&&e<i)return!0}return!1}(n)?parseFloat(n):u.test(n)?new Date(n):""===n?null:n):n;var r}function C(t,e,n,r){var i={type:t,code:e,message:n};void 0!==r&&(i.row=r),m.errors.push(i)}this.parse=function(i,o,a){var u=t.quoteChar||'"';if(t.newline||(t.newline=function(t,e){t=t.substring(0,1048576);var n=new RegExp(p(e)+"([^]*?)"+p(e),"gm"),r=(t=t.replace(n,"")).split("\r"),i=t.split("\n"),o=1<i.length&&i[0].length<r[0].length;if(1===r.length||o)return"\n";for(var s=0,a=0;a<r.length;a++)"\n"===r[a][0]&&s++;return s>=r.length/2?"\r\n":"\r"}(i,u)),r=!1,t.delimiter)w(t.delimiter)&&(t.delimiter=t.delimiter(i),m.meta.delimiter=t.delimiter);else{var c=function(e,n,r,i,o){var a,u,c,f;o=o||[",","\t","|",";",s.RECORD_SEP,s.UNIT_SEP];for(var l=0;l<o.length;l++){var d=o[l],h=0,p=0,g=0;c=void 0;for(var m=new v({comments:i,delimiter:d,newline:n,preview:10}).parse(e),y=0;y<m.data.length;y++)if(r&&b(m.data[y]))g++;else{var _=m.data[y].length;p+=_,void 0!==c?0<_&&(h+=Math.abs(_-c),c=_):c=_}0<m.data.length&&(p/=m.data.length-g),(void 0===u||h<=u)&&(void 0===f||f<p)&&1.99<p&&(u=h,a=d,f=p)}return{successful:!!(t.delimiter=a),bestDelimiter:a}}(i,t.newline,t.skipEmptyLines,t.comments,t.delimitersToGuess);c.successful?t.delimiter=c.bestDelimiter:(r=!0,t.delimiter=s.DefaultDelimiter),m.meta.delimiter=t.delimiter}var f=_(t);return t.preview&&t.header&&f.preview++,e=i,n=new v(f),m=n.parse(e,o,a),k(),d?{meta:{paused:!0}}:m||{meta:{paused:!1}}},this.paused=function(){return d},this.pause=function(){d=!0,n.abort(),e=w(t.chunk)?"":e.substring(n.getCharIndex())},this.resume=function(){c.streamer._halted?(d=!1,c.streamer.parseChunk(e,!0)):setTimeout(c.resume,3)},this.aborted=function(){return h},this.abort=function(){h=!0,n.abort(),m.meta.aborted=!0,w(t.complete)&&t.complete(m),e=""}}function p(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function v(t){var e,n=(t=t||{}).delimiter,r=t.newline,i=t.comments,o=t.step,a=t.preview,u=t.fastMode,c=e=void 0===t.quoteChar||null===t.quoteChar?'"':t.quoteChar;if(void 0!==t.escapeChar&&(c=t.escapeChar),("string"!=typeof n||-1<s.BAD_DELIMITERS.indexOf(n))&&(n=","),i===n)throw new Error("Comment character same as delimiter");!0===i?i="#":("string"!=typeof i||-1<s.BAD_DELIMITERS.indexOf(i))&&(i=!1),"\n"!==r&&"\r"!==r&&"\r\n"!==r&&(r="\n");var f=0,l=!1;this.parse=function(s,d,h){if("string"!=typeof s)throw new Error("Input must be a string");var v=s.length,g=n.length,m=r.length,y=i.length,_=w(o),b=[],k=[],E=[],R=f=0;if(!s)return K();if(t.header&&!d){var C=s.split(r)[0].split(n),S=[],O={},x=!1;for(var T in C){var A=C[T];w(t.transformHeader)&&(A=t.transformHeader(A,T));var I=A,j=O[A]||0;for(0<j&&(x=!0,I=A+"_"+j),O[A]=j+1;S.includes(I);)I=I+"_"+j;S.push(I)}if(x){var D=s.split(r);D[0]=S.join(n),s=D.join(r)}}if(u||!1!==u&&-1===s.indexOf(e)){for(var z=s.split(r),L=0;L<z.length;L++){if(E=z[L],f+=E.length,L!==z.length-1)f+=r.length;else if(h)return K();if(!i||E.substring(0,y)!==i){if(_){if(b=[],U(E.split(n)),$(),l)return K()}else U(E.split(n));if(a&&a<=L)return b=b.slice(0,a),K(!0)}}return K()}for(var P=s.indexOf(n,f),F=s.indexOf(r,f),M=new RegExp(p(c)+p(e),"g"),N=s.indexOf(e,f);;)if(s[f]!==e)if(i&&0===E.length&&s.substring(f,f+y)===i){if(-1===F)return K();f=F+m,F=s.indexOf(r,f),P=s.indexOf(n,f)}else if(-1!==P&&(P<F||-1===F))E.push(s.substring(f,P)),f=P+g,P=s.indexOf(n,f);else{if(-1===F)break;if(E.push(s.substring(f,F)),X(F+m),_&&($(),l))return K();if(a&&b.length>=a)return K(!0)}else for(N=f,f++;;){if(-1===(N=s.indexOf(e,N+1)))return h||k.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:b.length,index:f}),q();if(N===v-1)return q(s.substring(f,N).replace(M,e));if(e!==c||s[N+1]!==c){if(e===c||0===N||s[N-1]!==c){-1!==P&&P<N+1&&(P=s.indexOf(n,N+1)),-1!==F&&F<N+1&&(F=s.indexOf(r,N+1));var B=W(-1===F?P:Math.min(P,F));if(s.substr(N+1+B,g)===n){E.push(s.substring(f,N).replace(M,e)),s[f=N+1+B+g]!==e&&(N=s.indexOf(e,f)),P=s.indexOf(n,f),F=s.indexOf(r,f);break}var H=W(F);if(s.substring(N+1+H,N+1+H+m)===r){if(E.push(s.substring(f,N).replace(M,e)),X(N+1+H+m),P=s.indexOf(n,f),N=s.indexOf(e,f),_&&($(),l))return K();if(a&&b.length>=a)return K(!0);break}k.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:b.length,index:f}),N++}}else N++}return q();function U(t){b.push(t),R=f}function W(t){var e=0;if(-1!==t){var n=s.substring(N+1,t);n&&""===n.trim()&&(e=n.length)}return e}function q(t){return h||(void 0===t&&(t=s.substring(f)),E.push(t),f=v,U(E),_&&$()),K()}function X(t){f=t,U(E),E=[],F=s.indexOf(r,f)}function K(t){return{data:b,errors:k,meta:{delimiter:n,linebreak:r,aborted:l,truncated:!!t,cursor:R+(d||0)}}}function $(){o(K()),b=[],k=[]}},this.abort=function(){l=!0},this.getCharIndex=function(){return f}}function g(t){var e=t.data,n=i[e.workerId],r=!1;if(e.error)n.userError(e.error,e.file);else if(e.results&&e.results.data){var o={abort:function(){r=!0,m(e.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:y,resume:y};if(w(n.userStep)){for(var s=0;s<e.results.data.length&&(n.userStep({data:e.results.data[s],errors:e.results.errors,meta:e.results.meta},o),!r);s++);delete e.results}else w(n.userChunk)&&(n.userChunk(e.results,o,e.file),delete e.results)}e.finished&&!r&&m(e.workerId,e.results)}function m(t,e){var n=i[t];w(n.userComplete)&&n.userComplete(e),n.terminate(),delete i[t]}function y(){throw new Error("Not implemented.")}function _(t){if("object"!=typeof t||null===t)return t;var e=Array.isArray(t)?[]:{};for(var n in t)e[n]=_(t[n]);return e}function b(t,e){return function(){t.apply(e,arguments)}}function w(t){return"function"==typeof t}return r&&(e.onmessage=function(t){var n=t.data;if(void 0===s.WORKER_ID&&n&&(s.WORKER_ID=n.workerId),"string"==typeof n.input)e.postMessage({workerId:s.WORKER_ID,results:s.parse(n.input,n.config),finished:!0});else if(e.File&&n.input instanceof File||n.input instanceof Object){var r=s.parse(n.input,n.config);r&&e.postMessage({workerId:s.WORKER_ID,results:r,finished:!0})}}),(c.prototype=Object.create(u.prototype)).constructor=c,(f.prototype=Object.create(u.prototype)).constructor=f,(l.prototype=Object.create(l.prototype)).constructor=l,(d.prototype=Object.create(u.prototype)).constructor=d,s},void 0===(i="function"==typeof n?n.apply(e,r):n)||(t.exports=i)}}]);